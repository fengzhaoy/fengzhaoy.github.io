<!DOCTYPE html>
<html>
  <head><meta name="generator" content="Hexo 3.8.0">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
  <meta name="description" content="fengzhaoyang&#39;s blog">
  <meta name="keyword" content="hexo-theme, vuejs">
  
  <link rel="shortcut icon" href="/css/images/logo.png">
  
  <title>
    
    Kibana æœç´¢æ•™ç¨‹ | fzy-blog
    
  </title>
  <link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <link href="//cdnjs.cloudflare.com/ajax/libs/nprogress/0.2.0/nprogress.min.css" rel="stylesheet">
  <link href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/tomorrow.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/css/style.css">
  
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/geopattern/1.2.3/js/geopattern.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/nprogress/0.2.0/nprogress.min.js"></script>
  
  <script src="/js/qrious.js"></script>
  
  
  
  
    <!-- MathJax support START -->
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <!-- MathJax support END -->
  


</head>
<div class="wechat-share">
  <img src="/css/images/logo.png">
</div>
  <body>
    <header class="header fixed-header">
  <div class="header-container">
    <a class="home-link" href="/">
      <div class="logo"></div>
      <span>fzy-blog</span>
    </a>
    <ul class="right-list">
      
        <li class="list-item">
          
            <a href="/" class="item-link">Home</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/tags/" class="item-link">Tags</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/archives/" class="item-link">Archives</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/project/" class="item-link">Projects</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/about/" class="item-link">About</a>
          
        </li>
      
    </ul>
    <div class="menu">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </div>
    <div class="menu-mask">
      <ul class="menu-list">
        
          <li class="menu-item">
            
              <a href="/" class="menu-link">Home</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/tags/" class="menu-link">Tags</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/archives/" class="menu-link">Archives</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/project/" class="menu-link">Projects</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/about/" class="menu-link">About</a>
            
          </li>
        
      </ul>
    </div>
  </div>
</header>

    <div id="article-banner">
  <h2>Kibana æœç´¢æ•™ç¨‹</h2>
  <p class="post-date">2019-05-24</p>
  <div class="arrow-down">
    <a href="javascript:;"></a>
  </div>
</div>
<main class="app-body flex-box">
  <!-- Article START -->
  <article class="post-article">
    <section class="markdown-content"><h1 id="Kibana-æœç´¢æ•™ç¨‹"><a href="#Kibana-æœç´¢æ•™ç¨‹" class="headerlink" title="Kibana æœç´¢æ•™ç¨‹"></a>Kibana æœç´¢æ•™ç¨‹</h1><p>1 æ¦‚è¿°<br>å¾ˆå¤šç³»ç»Ÿçš„æ—¥å¿—éƒ½ä¼šæ”¾åœ¨ Kibana ä¾›æŸ¥è¯¢ï¼Œå°±æ˜¯æ‰€è°“çš„ ELKã€‚Kibana é™¤äº†å¯ä»¥ä½¿ç”¨ç•Œé¢ä¾›çš„ä¸€äº› tab æˆ–è€… button å»ç­›é€‰æ—¥å¿—ï¼Œä¹Ÿå¯ä»¥åœ¨æœç´¢æ ä¸­ä½¿ç”¨ Lucene çš„è¯­æ³•ç®€å•çš„äº¤äº’å¼æŸ¥è¯¢ã€‚å¯ä»¥åšåŸºäºå­—æ®µçš„ç‰¹å®šæœç´¢ï¼Œè¿‡æ»¤æ•°æ®ï¼Œä¹Ÿå¯ä»¥æŸ¥çœ‹ç´¢å¼•å·çš„æ–‡æ¡£ã€‚<br>æŸ¥è¯¢çš„è¯­æ³•å¯ä»¥å‚è€ƒ å®˜æ–¹æ–‡æ¡£ ï¼Œéå¸¸æ˜“è¯»ï¼Œéå¸¸å®¹æ˜“ï¼ŒåŒ…æ‹¬æ­£åˆ™è¯­æ³•å’Œå…¶ä»–æ¨¡ç³ŠåŒ¹é…æ–¹æ³•ã€‚</p>
<p>2 Lucene è¯­æ³•æŸ¥è¯¢<br>2.1 ç®€æ˜“æŸ¥è¯¢<br>å¦‚æœæŸ¥è¯¢çš„æ—¶å€™æ²¡æœ‰æ˜ç¡®æŸ¥è¯¢çš„å­—æ®µï¼Œä¼šé»˜è®¤ä¸º _all å­—æ®µï¼Œä¹Ÿå°±æ˜¯å…¨æ–‡æŸ¥è¯¢ã€‚ä¹Ÿå¯ä»¥æŒ‡å®šä¸€ä¸ªå­—æ®µï¼Œåˆç§°ä¸º field æ¥æŸ¥è¯¢ã€‚</p>
<p>å…¨æ–‡æŸ¥è¯¢ Exception<br>Exception</p>
<p>æŒ‡å®šæŸ¥è¯¢å­—æ®µ message é‡Œçš„ Exception<br>message: Exception</p>
<p>æŸ¥è¯¢çŸ­è¯­<br>message: â€œjava.lang.NullPointerExceptionâ€</p>
<p>ä»»ä½• message å­—æ®µéƒ½åŒ…å« Exception<br>message*: Exception</p>
<p>é€šé…ç¬¦çš„ä½¿ç”¨ï¼Œ? ä»£æ›¿å•ä¸ªå­—ç¬¦ï¼Œ_ ä»£æ›¿é›¶ä¸ªæˆ–è€…å¤šä¸ªå­—ç¬¦<br>message: Exceptio_</p>
<p>æ­£åˆ™è¡¨è¾¾å¼é€šè¿‡ä½¿ç”¨ / åŒ…å›´ï¼Œå¯ä»¥æ¤å…¥åˆ°æŸ¥è¯¢çš„å­—ç¬¦ä¸²ä¸­<br>message: /Ex?(cep[tion])/</p>
<p>å¦ä¸€ä¸ªæ­£åˆ™çš„ä½¿ç”¨ï¼ŒåŒ¹é…çš„å«ä¹‰æ˜¯ã€Œä¸¤ä½é abc çš„ä»»æ„å­—ç¬¦ã€<br>info.recallId: /[^abc]{2}/<br>2.2 å¤šå­—æ®µæŸ¥è¯¢<br>å¯ä»¥é€šè¿‡ä¸€äº›å¸ƒå°”æ“ä½œç¬¦æ¥ä½¿ç”¨ï¼Œå¦‚æœæŸ¥è¯¢ä¸­æ²¡æœ‰ä»»æ„çš„æ“ä½œç¬¦å·ï¼Œé‚£ä¹ˆé»˜è®¤ä½¿ç”¨ OR æ“ä½œç¬¦ã€‚</p>
<p>æ”¯æŒ AND, OR, NOTï¼Œä¹Ÿå¯ä»¥å†™æˆ&amp;&amp;, ||, !æ“ä½œç¬¦<br>message: ((Exception AND Error) OR (Error AND Exception) OR Error) AND NOT Exception</p>
<p>åŒ…å« lucene ä½†ä¸åŒ…å« elasticsearch<br>lucene NOT elasticsearch</p>
<ul>
<li>å¿…é¡»åŒ…å«ï¼Œå…¶ä»–å¯æœ‰å¯æ— ï¼Œlucene å¿…é¡»åŒ…å«ï¼Œapache å¯æœ‰å¯æ— â€¦<br>+lucene apache</li>
</ul>
<p>ä¸èƒ½å‡ºç°çš„æ“ä½œç¬¦å·â€-â€œï¼ŒåŒ…å«äº† lucenceï¼Œä½†ä¸åŒ…å« apacheâ€¦<br>+lucene-apache<br>2.3 èŒƒå›´æ“ä½œ<br>å¯ä»¥æŒ‡å®šæ—¥æœŸã€æ•°å­—æˆ–è€…å­—ç¬¦ä¸²å­—æ®µçš„èŒƒå›´</p>
<p>[min TO max] æ˜¯é—­åŒºé—´<br>{min TO max} æ˜¯å¼€åŒºé—´<br>@timestamp: [1510536210000 TO 1510550000000]</p>
<ul>
<li>è¡¨ç¤ºä¸€ç«¯ä¸é™åˆ¶èŒƒå›´<br>count:[10 TO *]<br>2.4 è½¬ä¹‰<br>ä¿ç•™å­—ç¬¦åŒ…æ‹¬ä»¥ä¸‹ï¼Œéœ€è¦ä½¿ç”¨è½¬ä¹‰ç¬¦æ¥è¿›è¡Œè½¬ä¹‰ï¼š</li>
</ul>
<p>ä¾‹å­<br>message: â€œdomain=jobmd_ent4entâ€</p>
<p>è½¬ä¹‰ç¬¦<br>Â±=&amp;&amp;||&gt;&lt;!(){}[]^â€~*?ğŸ˜•<br>2.5 æ¨¡ç³ŠæŸ¥è¯¢<br>ä½¿ç”¨â€â€å­—ç¬¦ä»¥åŠä¸€ä¸ªç´§éšå…¶åçš„æ•´æ•°å€¼ï¼Œå½“ä½¿ç”¨è¯¥ä¿®é¥°ç¬¦ä¿®é¥°ä¸€ä¸ªè¯é¡¹çš„æ—¶å€™ï¼Œæ„å‘³ç€æˆ‘ä»¬æƒ³æœç´¢é‚£äº›åŒ…å«è¯¥æ­¤é¡¹è¿‘è¯é¡¹çš„æ–‡æ¡£ã€‚â€â€å­—ç¬¦åçš„æ•´æ•°å€¼ç¡®å®šäº†è¿‘ä¼¼è¯é¡¹ä¸åŸå§‹è¯é¡¹çš„æœ€å¤§ç¼–è¾‘è·ç¦»ã€‚</p>
<p>mastering book Elasticsearch ä¹Ÿä¼šè¢«è®¤ä¸ºåŒ¹é…<br>title: â€œmastering Elasticsearchâ€~2<br>3 Kibana ä¸­ä¸€äº›å¥½ç”¨çš„åŠŸèƒ½<br>3.1 Save Search<br>å¯ä»¥ä¿å­˜ä¹‹å‰çš„ queryï¼Œé€šè¿‡å†å²è®°å½•å¯ä»¥æŸ¥æ‰¾æœ€è¿‘çš„ä½¿ç”¨ã€‚</p>
<p>3.2 æ—¶é—´è¿‡æ»¤å™¨<br>å¯ä»¥è®¾ç½®ç›¸å¯¹ relative æˆ–è€…ç»å¯¹ absolute æ—¶é—´è¿‡æ»¤å™¨ï¼Œå‰è€…æ˜¯ç›¸å¯¹äºå½“å‰æ—¶é—´çš„æ—¶é—´ï¼Œåè€…æ˜¯ç»å¯¹æ—¶é—´ã€‚</p>
<p>3.3 è‡ªåŠ¨åˆ·æ–°<br>å›ºå®šçš„æŸ¥è¯¢æ¡ä»¶çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥è®¾ç½®è‡ªåŠ¨åˆ·æ–°çš„æ—¶é—´æ¥åˆ·æ–°å¯è§†åŒºåŸŸã€‚</p>
<p>3.4 ç›´æ–¹å›¾é€‰æ‹©åŒºåŸŸ<br>é€‰æ‹©åŒºåŸŸå¯ä»¥å‡ºå‘æ—¶é—´è¿‡æ»¤å™¨ã€‚</p>
<p>3.5 å­—æ®µåˆ—è¡¨æœç´¢å­—æ®µ<br>å¯ä»¥é€šè¿‡ add æ·»åŠ ä¸åŒç»„åˆã€‚</p>
<p>3.6 share åŠŸèƒ½<br>å¯¼èˆªæ å¤„æœ‰ä¸€ä¸ª share æŒ‰é’®ï¼Œå°†æŸ¥è¯¢çš„è¯­å¥é€šè¿‡é“¾æ¥çš„æ–¹å¼è¿›è¡Œåˆ†äº«ï¼Œåˆ†åˆ«å›¢é˜Ÿæˆå‘˜ä¸€èµ·æŸ¥è¯¢ã€‚</p>
<p>4 åº”ç”¨ä¾‹å­-æŸç”¨æˆ·çš„æ¨è bad case<br>ç¡®å®šè¿™ä¸ª bad case çš„è¯·æ±‚å‚æ•°ï¼Œæ‹¿åˆ° id å’Œ domain<br>ç¡®å®šè¯·æ±‚å‘ç”Ÿçš„æ—¶é—´æˆ–è€…æ—¶é—´æ®µ</p>
<p>å·²çŸ¥ domain ä¸º bbs_app_recommï¼Œå¹¶ä¸”ç”¨æˆ·åä¸ºã€Œoscarã€çš„è¯·æ±‚ï¼Œåœ¨ 2017 å¹´ 11 æœˆ 7 æ—¥ ä¸‹åˆ 4 ç‚¹å‰åï¼Œæœ‰ä¸€æ¬¡æ¨èçš„ bad caseï¼Œéœ€è¦è¿™æ¬¡æ¨èçš„è¿‡ç¨‹ï¼Œäº†è§£ä¸ºä½•ä¼šäº§ç”Ÿè¿™æ¬¡æ¨èçš„ç»“æœã€‚<br>é€šè¿‡æŸ¥è¯¢åˆ°çš„ç»“æœä¸Šä¸‹æµè§ˆï¼Œå¾—åˆ°è¯¥ç”¨æˆ·çš„ recall å’Œ rerank ç»“æœï¼Œå¤§è‡´å¯ä»¥æ‰¾åˆ° bad case çš„åŸå› ã€‚<br>message: â€œoscarâ€ AND @timestamp: 1510042056000</p>
<p>å‚è€ƒï¼š<br><a href="https://segmentfault.com/a/1190000002972420" target="_blank" rel="noopener">https://segmentfault.com/a/1190000002972420</a><br><a href="https://zhuanlan.zhihu.com/p/33791813" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/33791813</a></p>
</section>
    <!-- Tags START -->
    
    <div class="tags">
      <span>Tags:</span>
      
  <a href="/tags#åˆ†å¸ƒå¼æ—¥å¿—ç›‘æ§">
    <span class="tag-code">åˆ†å¸ƒå¼æ—¥å¿—ç›‘æ§</span>
  </a>

    </div>
    
    <!-- Tags END -->
    <!-- NAV START -->
    
  <div class="nav-container">
    <!-- reverse left and right to put prev and next in a more logic postition -->
    
      <a class="nav-left" href="/2019/05/24/åˆ†å¸ƒå¼æ—¥å¿—ç›‘æ§/JVMç›‘æ§/">
        <span class="nav-arrow">â† </span>
        
          JVM ç›‘æ§
        
      </a>
    
    
      <a class="nav-right" href="/2019/05/24/åˆ†å¸ƒå¼æœç´¢ES/ELK/">
        
          ELK
        
        <span class="nav-arrow"> â†’</span>
      </a>
    
  </div>

    <!-- NAV END -->
    <!-- æ‰“èµ START -->
    
    <div class="money-like">
      <div class="reward-btn">
        èµ
        <span class="money-code">
          <span class="alipay-code">
            <div class="code-image"></div>
            <b>ä½¿ç”¨æ”¯ä»˜å®æ‰“èµ</b>
          </span>
          <span class="wechat-code">
            <div class="code-image"></div>
            <b>ä½¿ç”¨å¾®ä¿¡æ‰“èµ</b>
          </span>
        </span>
      </div>
      <p class="notice">è‹¥ä½ è§‰å¾—æˆ‘çš„æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®å¯¹æˆ‘æ‰“èµ</p>
    </div>
    
    <!-- æ‰“èµ END -->
    <!-- äºŒç»´ç  START -->
    
    <div class="qrcode">
      <canvas id="share-qrcode"></canvas>
      <p class="notice">æ‰«æäºŒç»´ç ï¼Œåˆ†äº«æ­¤æ–‡ç« </p>
    </div>
    
    <!-- äºŒç»´ç  END -->
    
    <!-- No Comment -->
    
  </article>
  <!-- Article END -->
  <!-- Catalog START -->
  
  <aside class="catalog-container">
  <div class="toc-main">
    <strong class="toc-title">Catalog</strong>
    
      <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link" href="#Kibana-æœç´¢æ•™ç¨‹"><span class="toc-nav-text">Kibana æœç´¢æ•™ç¨‹</span></a></li></ol>
    
  </div>
</aside>
  
  <!-- Catalog END -->
</main>

<script>
  (function () {
    var url = 'https://fengzhaoy.github.io/2019/05/24/åˆ†å¸ƒå¼æ—¥å¿—ç›‘æ§/Kibanaæœç´¢æ•™ç¨‹/';
    var banner = ''
    if (banner !== '' && banner !== 'undefined' && banner !== 'null') {
      $('#article-banner').css({
        'background-image': 'url(' + banner + ')'
      })
    } else {
      $('#article-banner').geopattern(url)
    }
    $('.header').removeClass('fixed-header')

    // error image
    $(".markdown-content img").on('error', function () {
      $(this).attr('src', 'http://file.muyutech.com/error-img.png')
      $(this).css({
        'cursor': 'default'
      })
    })

    // zoom image
    $(".markdown-content img").on('click', function () {
      var src = $(this).attr('src')
      if (src !== 'http://file.muyutech.com/error-img.png') {
        var imageW = $(this).width()
        var imageH = $(this).height()

        var zoom = ($(window).width() * 0.95 / imageW).toFixed(2)
        zoom = zoom < 1 ? 1 : zoom
        zoom = zoom > 2 ? 2 : zoom
        var transY = (($(window).height() - imageH) / 2).toFixed(2)

        $('body').append('<div class="image-view-wrap"><div class="image-view-inner"><img src="' + src +
          '" /></div></div>')
        $('.image-view-wrap').addClass('wrap-active')
        $('.image-view-wrap img').css({
          'width': `${imageW}`,
          'transform': `translate3d(0, ${transY}px, 0) scale3d(${zoom}, ${zoom}, 1)`
        })
        $('html').css('overflow', 'hidden')

        $('.image-view-wrap').on('click', function () {
          $(this).remove()
          $('html').attr('style', '')
        })
      }
    })
  })();
</script>


<script>
  var qr = new QRious({
    element: document.getElementById('share-qrcode'),
    value: document.location.href
  });
</script>





    <div class="scroll-top">
  <span class="arrow-icon"></span>
</div>
    <footer class="app-footer">
  <p class="copyright">
    &copy; 2019
  </p>
</footer>

<script>
  function async (u, c) {
    var d = document,
      t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (c) {
      o.addEventListener('load', function (e) {
        c(null, e);
      }, false);
    }
    s.parentNode.insertBefore(o, s);
  }
</script>
<script>
  async ("//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js", function () {
    FastClick.attach(document.body);
  })
</script>

<script>
  var hasLine = 'true';
  async ("//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js", function () {
    $('figure pre').each(function (i, block) {
      var figure = $(this).parents('figure');
      if (hasLine === 'false') {
        figure.find('.gutter').hide();
      }
      var lang = figure.attr('class').split(' ')[1] || 'code';
      var codeHtml = $(this).html();
      var codeTag = document.createElement('code');
      codeTag.className = lang;
      codeTag.innerHTML = codeHtml;
      $(this).attr('class', '').empty().html(codeTag);
      figure.attr('data-lang', lang.toUpperCase());
      hljs.highlightBlock(block);
    });
  })
</script>
<!-- Baidu Tongji -->

<script src="/js/script.js"></script>
  </body>
</html>